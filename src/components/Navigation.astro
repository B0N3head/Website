---
import Logo from "@/logos/Logo-Full.svg"

const { pathname } = Astro.url;
---

<nav class="relative flex items-center justify-center h-14">
    
  <div class="absolute top-2 left-10">
    <a href="/">
        <Logo class="w-54 logo-header" />
    </a>
  </div>

  <div class="nav-links relative">
    <a href="/"        class={pathname === "/"        ? "active" : ""}>Home</a>
    <a href="/about"   class={pathname === "/about"   ? "active" : ""}>About Us</a>
    <a href="/team"    class={pathname === "/team"    ? "active" : ""}>Our Team</a>

    <div class="dropdown">
      <a class={pathname.startsWith("/projects") ? "active" : ""}>Projects</a>
      <div class="dropdown-content">
        <a href="/projects/beginner">Beginner</a>
        <a href="/projects/intermediate">Intermediate</a>
        <a href="/projects/advanced">Advanced</a>
      </div>
    </div>

    <a href="/events"  class={pathname === "/events"  ? "active" : ""}>Events</a>
    <a href="/contact" class={pathname === "/contact" ? "active" : ""}>Contact Us</a>
    <div class="indicator"></div>
  </div>
</nav>


<script type="module" client:load>
  const navContainer = document.querySelector('.nav-links');
  const links        = Array.from(navContainer.querySelectorAll('a:not(.dropdown-content a)'));
  const indicator    = navContainer.querySelector('.indicator');

  function updateIndicator(linkEl) {
    const linkBox      = linkEl.getBoundingClientRect();
    const containerBox = navContainer.getBoundingClientRect();
    const offsetX      = linkBox.left - containerBox.left;

    indicator.style.width = `${linkBox.width}px`;
    indicator.style.left  = `${offsetX}px`;
  }

  const activeLink = navContainer.querySelector('a.active');
  if (activeLink) {
    updateIndicator(activeLink);
  }

  links.forEach(link => {
    link.addEventListener('mouseenter', () => updateIndicator(link));
  });

  navContainer.addEventListener('mouseleave', () => {
    if (activeLink) {
      updateIndicator(activeLink);
    }
  });
</script>